<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Mini Cookie Run</title>
<style>
body {
  margin: 0;
  overflow: hidden;
  background: #87CEEB;
}
canvas {
  display: block;
  margin: auto;
  background: #f4d9a6;
}
</style>
</head>
<body>
<canvas id="game" width="800" height="400"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

let player = {
  x: 100,
  y: 300,
  width: 40,
  height: 40,
  dy: 0,
  gravity: 0.8,
  jumpPower: -15,
  grounded: false,
  health: 3,
  score: 0
};

let enemies = [];

function spawnEnemy() {
  enemies.push({
    x: canvas.width,
    y: 320,
    width: 30,
    height: 30
  });
}

setInterval(spawnEnemy, 2000);

function update() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  // Player physics
  player.dy += player.gravity;
  player.y += player.dy;

  if (player.y > 300) {
    player.y = 300;
    player.dy = 0;
    player.grounded = true;
  }

  // Draw player
  ctx.fillStyle = "brown";
  ctx.fillRect(player.x, player.y, player.width, player.height);

  // Enemies
  ctx.fillStyle = "red";
  enemies.forEach((enemy, index) => {
    enemy.x -= 6;
    ctx.fillRect(enemy.x, enemy.y, enemy.width, enemy.height);

    // Collision
    if (
      player.x < enemy.x + enemy.width &&
      player.x + player.width > enemy.x &&
      player.y < enemy.y + enemy.height &&
      player.y + player.height > enemy.y
    ) {
      player.health--;
      enemies.splice(index, 1);
    }

    if (enemy.x < 0) {
      enemies.splice(index, 1);
      player.score++;
    }
  });

  // UI
  ctx.fillStyle = "black";
  ctx.font = "20px Arial";
  ctx.fillText("❤️ " + player.health, 20, 30);
  ctx.fillText("⭐ " + player.score, 20, 60);

  if (player.health <= 0) {
    ctx.fillText("GAME OVER", 350, 200);
    return;
  }

  requestAnimationFrame(update);
}

document.addEventListener("keydown", (e) => {
  if (e.code === "Space" && player.grounded) {
    player.dy = player.jumpPower;
    player.grounded = false;
  }
});

update();
</script>
</body>
</html>
